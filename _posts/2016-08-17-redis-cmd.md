---
author: huangzhuo
comments: true
date: 2016-08-17 05:03:33+00:00
layout: post
slug: redis%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4%e6%80%bb%e7%bb%93
title: redis常用命令总结
wordpress_id: 180
categories:
- 技术
tags:
- redis
- 数据库
---
{% include JB/setup %}


    		  

在平时的工作中，需要根据需求对Redis数据库进行一些操作。

可以参考Redis官网[http://redis.io/commands](http://redis.io/commands) 进行详细了解

1.SELECT 切换数据库

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379[1]> HELP SELECT
```



```plain spaces 

```

```plain plain 
SELECT index
```



```plain spaces 

```

```plain plain 
summary: Change the selected database for the current connection
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: connection
```



```plain plain 
redis 127.0.0.1:6379[1]> SELECT 2
```



```plain plain 
OK
```


</td></tr></tbody></table>

2.LLEN 得到一个列表的长度

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379[2]> HELP LLEN
```



```plain spaces 

```

```plain plain 
LLEN key
```



```plain spaces 

```

```plain plain 
summary: Get the length of a list
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: list
```



```plain plain 
redis 127.0.0.1:6379[2]> LLEN bi
```



```plain plain 
(integer) 412
```


</td></tr></tbody></table>

3.LRANGE 获取一个列表的所有元素

LRANGE 索引是以0开始的，0表示第一个元素，-1表示最后一个元素

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379[2]> HELP LRANGE
```



```plain spaces 

```

```plain plain 
LRANGE key start stop
```



```plain spaces 

```

```plain plain 
summary: Get a range of elements from a list
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: list
```



```plain plain 
redis 127.0.0.1:6379[2]> LRANGE bi 0 5
```


</td></tr></tbody></table>

4.LPUSH 将一个或多个值添加到一个列表的开头

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379[2]> HELP LPUSH
```



```plain spaces 

```

```plain plain 
LPUSH key value [value ...]
```



```plain spaces 

```

```plain plain 
summary: Prepend one or multiple values to a list
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: list
```



```plain plain 
redis 127.0.0.1:6379[2]> LPUSH bi http://abc.com/logUserLogin?event_id=25&uid=de721bcef5cba1fc182d18
```


</td></tr></tbody></table>

5.RPUSH 将一个或多个值追加到一个列表的末尾

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379[2]> HELP RPUSH
```



```plain spaces 

```

```plain plain 
RPUSH key value [value ...]
```



```plain spaces 

```

```plain plain 
summary: Append one or multiple values to a list
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: list
```



```plain plain 
redis 127.0.0.1:6379[2]> RPUSH bi http://abc.com/logUserLogin?event_id=25&uid=de721bcef5cba1fc182d18
```


</td></tr></tbody></table>

6.SAVE 同步数据到磁盘

SAVE命令执行的时候会阻塞连接，所以生成环境最好使用BGSAVE命令

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

10

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379[2]> HELP SAVE
```



```plain spaces 

```

```plain plain 
SAVE -
```



```plain spaces 

```

```plain plain 
summary: Synchronously save the dataset to disk
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: server
```



```plain plain 
redis 127.0.0.1:6379[2]> SAVE
```



```plain plain 
OK
```



```plain plain 
(1.33s)
```


</td></tr></tbody></table>

7.BGSAVE 异步数据到磁盘

使用BGSAVE,Redis将会在后台执行保存数据的操作，不影响正常的客户端连接，Redis将会fork出一个子进程用于保存数据，父进程继续处理客户端请求。

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379[2]> HELP BGSAVE
```



```plain spaces 

```

```plain plain 
BGSAVE -
```



```plain spaces 

```

```plain plain 
summary: Asynchronously save the dataset to disk
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: server
```



```plain plain 
redis 127.0.0.1:6379[2]> BGSAVE
```



```plain plain 
Background saving started
```


</td></tr></tbody></table>

8.TYPE 判断一个KEY的类型

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379[2]> HELP TYPE
```



```plain spaces 

```

```plain plain 
TYPE key
```



```plain spaces 

```

```plain plain 
summary: Determine the type stored at key
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: generic
```



```plain plain 
redis 127.0.0.1:6379[2]> TYPE bi
```



```plain plain 
list
```


</td></tr></tbody></table>

  


9.BGREWRITEAOF 

异步重写AOF文件，Redis将会创建一个对当前AOF文件优化过的AOF版本。

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379> help BGREWRITEAOF
```



```plain spaces 

```

```plain plain 
BGREWRITEAOF -
```



```plain spaces 

```

```plain plain 
summary: Asynchronously rewrite the append-only file
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: server
```


</td></tr></tbody></table>

  


10.CONFIG GET    


获取某个配置项的值

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

10

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379> help config get
```



```plain spaces 

```

```plain plain 
CONFIG GET parameter
```



```plain spaces 

```

```plain plain 
summary: Get the value of a configuration parameter
```



```plain spaces 

```

```plain plain 
since: 2.0.0
```



```plain spaces 

```

```plain plain 
group: server
```



```plain plain 
redis 127.0.0.1:6379> config get maxmemory
```



```plain plain 
1) "maxmemory"
```



```plain plain 
2) "0"
```


</td></tr></tbody></table>

  


11.CONFIG SET  


设置某个参数的值

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379> help config set
```



```plain spaces 

```

```plain plain 
CONFIG SET parameter value
```



```plain spaces 

```

```plain plain 
summary: Set a configuration parameter to the given value
```



```plain spaces 

```

```plain plain 
since: 2.0.0
```



```plain spaces 

```

```plain plain 
group: server
```



```plain plain 
redis 127.0.0.1:6379> config set maxmemory 200000000
```



```plain plain 
OK
```


</td></tr></tbody></table>

  


12.DBSIZE  


返回当前数据库的KEY值得数量

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379[3]> HELP DBSIZE
```



```plain spaces 

```

```plain plain 
DBSIZE -
```



```plain spaces 

```

```plain plain 
summary: Return the number of keys in the selected database
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: server
```



```plain plain 
redis 127.0.0.1:6379[3]> dbsize
```



```plain plain 
(integer) 12502
```


</td></tr></tbody></table>

  


13.DEL

删除一个KEY值

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379> help del
```



```plain spaces 

```

```plain plain 
DEL key [key ...]
```



```plain spaces 

```

```plain plain 
summary: Delete a key
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: generic
```



```plain plain 
redis 127.0.0.1:6379> del foo
```



```plain plain 
(integer) 1
```


</td></tr></tbody></table>

  


14.EXISTS

检查一个KEY是否存在

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379> help exists
```



```plain spaces 

```

```plain plain 
EXISTS key
```



```plain spaces 

```

```plain plain 
summary: Determine if a key exists
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: generic
```



```plain plain 
redis 127.0.0.1:6379> exists foo
```



```plain plain 
(integer) 1
```


</td></tr></tbody></table>

  


15.SET 命令

设置一个KEY的值

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

10

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379> help set
```



```plain spaces 

```

```plain plain 
SET key value
```



```plain spaces 

```

```plain plain 
summary: Set the string value of a key
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: string
```



```plain plain 
redis 127.0.0.1:6379> set foo test
```



```plain plain 
OK
```



```plain plain 
redis 127.0.0.1:6379>
```


</td></tr></tbody></table>

  


16.PERSIST

删除一个KEY的过期时间  


<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

</td>
<td class="code" >


```plain plain 
edis 127.0.0.1:6379> help persist
```



```plain spaces 

```

```plain plain 
PERSIST key
```



```plain spaces 

```

```plain plain 
summary: Remove the expiration from a key
```



```plain spaces 

```

```plain plain 
since: 2.2.0
```



```plain spaces 

```

```plain plain 
group: generic
```


</td></tr></tbody></table>

  


17.RENAME

重新命名一个KEY

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

10

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379> help rename
```



```plain spaces 

```

```plain plain 
RENAME key newkey
```



```plain spaces 

```

```plain plain 
summary: Rename a key
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: generic
```



```plain plain 
redis 127.0.0.1:6379> rename foo footest
```



```plain plain 
OK
```



```plain plain 
redis 127.0.0.1:6379>
```


</td></tr></tbody></table>

  


18.EXPIRE

为一个KEY设置一个TTL过期时间

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379> help expire
```



```plain spaces 

```

```plain plain 
EXPIRE key seconds
```



```plain spaces 

```

```plain plain 
summary: Set a key's time to live in seconds
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: generic
```



```plain plain 
redis 127.0.0.1:6379> expire footest 300
```



```plain plain 
(integer) 1
```


</td></tr></tbody></table>

  


19.TTL  


获取过期时间

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379> help ttl
```



```plain spaces 

```

```plain plain 
TTL key
```



```plain spaces 

```

```plain plain 
summary: Get the time to live for a key
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: generic
```



```plain plain 
redis 127.0.0.1:6379> ttl footest
```



```plain plain 
(integer) 289
```



```plain plain 
redis 127.0.0.1:6379> ttl footest
```



```plain plain 
(integer) 285
```



```plain plain 
redis 127.0.0.1:6379> ttl footest
```



```plain plain 
(integer) 283
```



```plain plain 
redis 127.0.0.1:6379> ttl footest
```



```plain plain 
(integer) 282
```



```plain plain 
redis 127.0.0.1:6379> ttl footest
```



```plain plain 
(integer) 282
```



```plain plain 
redis 127.0.0.1:6379>
```


</td></tr></tbody></table>

  


20.EXPIREAT

设置一个KEY的过期时间，以UNIX时间戳表示

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

10

11

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379> help expireat
```



```plain spaces 

```

```plain plain 
EXPIREAT key timestamp
```



```plain spaces 

```

```plain plain 
summary: Set the expiration for a key as a UNIX timestamp
```



```plain spaces 

```

```plain plain 
since: 1.2.0
```



```plain spaces 

```

```plain plain 
group: generic
```



```plain plain 
redis 127.0.0.1:6379> expireat foo 1431532800
```



```plain plain 
(integer) 1
```



```plain plain 
redis 127.0.0.1:6379> ttl foo
```



```plain plain 
(integer) 3210141
```


</td></tr></tbody></table>

  


21.GET

获取一个KEY的值

<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379> help get
```



```plain spaces 

```

```plain plain 
GET key
```



```plain spaces 

```

```plain plain 
summary: Get the value of a key
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: string
```



```plain plain 
redis 127.0.0.1:6379> get foo
```



```plain plain 
"test"
```


</td></tr></tbody></table>

  


22.HGET  


获取一个哈希字段的值  


<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

10

11

12

13

14

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379> help hget
```



```plain spaces 

```

```plain plain 
HGET key field
```



```plain spaces 

```

```plain plain 
summary: Get the value of a hash field
```



```plain spaces 

```

```plain plain 
since: 2.0.0
```



```plain spaces 

```

```plain plain 
group: hash
```



```plain plain 
redis 127.0.0.1:6379> hset myhash field1 "foo"
```



```plain plain 
(integer) 1
```



```plain plain 
redis 127.0.0.1:6379> hget myhash field1
```



```plain plain 
"foo"
```



```plain plain 
redis 127.0.0.1:6379> hget myhash field2
```



```plain plain 
(nil)
```



```plain plain 
redis 127.0.0.1:6379>
```


</td></tr></tbody></table>

  


23.LASTSAVE

上次成功保存数据到磁盘的UNIX时间戳  


<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

10

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379> help lastsave
```



```plain spaces 

```

```plain plain 
LASTSAVE -
```



```plain spaces 

```

```plain plain 
summary: Get the UNIX time stamp of the last successful save to disk
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: server
```



```plain plain 
redis 127.0.0.1:6379> lastsave
```



```plain plain 
(integer) 1428373205
```



```plain plain 
redis 127.0.0.1:6379>
```


</td></tr></tbody></table>

  


24.LPUSH

将一个或多个值附加到一个Redis列表中  


<table cellpadding="0" cellspacing="0" border="0" ><tbody ><tr >
<td class="gutter" >

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

</td>
<td class="code" >


```plain plain 
redis 127.0.0.1:6379> help lpush
```



```plain spaces 

```

```plain plain 
LPUSH key value [value ...]
```



```plain spaces 

```

```plain plain 
summary: Prepend one or multiple values to a list
```



```plain spaces 

```

```plain plain 
since: 1.0.0
```



```plain spaces 

```

```plain plain 
group: list
```



```plain spaces 

```



```plain spaces 

```



```plain spaces 

```



```plain plain 
redis 127.0.0.1:6379> lpush mylist a b c
```



```plain plain 
(integer) 6
```



```plain plain 
redis 127.0.0.1:6379> LRANGE mylist 0 -1
```



```plain plain 
1) "c"
```



```plain plain 
2) "b"
```



```plain plain 
3) "a"
```



```plain plain 
4) "c"
```



```plain plain 
5) "b"
```



```plain plain 
6) "a"
```



```plain plain 
redis 127.0.0.1:6379> llen mylist
```



```plain plain 
(integer) 6
```


</td></tr></tbody></table>

  


  



    		
